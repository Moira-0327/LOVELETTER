(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const B=["january","february","march","april","may","june","july","august","september","october","november","december"],s={partnerName:"",senderName:"",togetherDate:null,letterContent:"",photos:[null,null,null,null],typingActive:!1,hasPhotos:!1,expandedPanel:null,letterTyped:!1},q=document.getElementById("setup-screen"),O=document.getElementById("result-screen"),gt=document.getElementById("setup-form"),yt=document.querySelectorAll(".photo-upload-slot"),vt=document.getElementById("back-btn");document.getElementById("flatlay-scene");const xt=document.getElementById("letter-paper"),G=document.getElementById("photobooth-strip-el"),at=document.getElementById("flatlay-actions"),_=document.getElementById("expand-backdrop"),z=document.getElementById("expand-letter-panel"),V=document.getElementById("expand-photobooth-panel");let E=null,D=null,k=!1,P=null;function ot(){if(E)return E;try{E=new(window.AudioContext||window.webkitAudioContext);const e=E.sampleRate,t=Math.floor(e*.03),a=E.createBuffer(1,t,e),r=a.getChannelData(0);for(let n=0;n<t;n++){const o=n/e,i=Math.exp(-o*150);r[n]=(Math.sin(o*600*6.283)*.4+(Math.random()-.5)*.15)*i*.1}D=a}catch{}if(!P)try{const a=Math.floor(661.5),r=new ArrayBuffer(44+a*2),n=new DataView(r),o=(i,c)=>{for(let d=0;d<c.length;d++)n.setUint8(i+d,c.charCodeAt(d))};o(0,"RIFF"),n.setUint32(4,36+a*2,!0),o(8,"WAVE"),o(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,22050,!0),n.setUint32(28,22050*2,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),o(36,"data"),n.setUint32(40,a*2,!0);for(let i=0;i<a;i++){const c=i/22050,d=Math.sin(c*600*6.283)*.3*Math.exp(-c*150);n.setInt16(44+i*2,Math.max(-1,Math.min(1,d))*32767,!0)}P=new Audio(URL.createObjectURL(new Blob([r],{type:"audio/wav"}))),P.volume=.15}catch{}return E}function X(){const e=ot();if(e&&(e.state==="suspended"?e.resume().then(()=>{k=!0}):k=!0,D))try{const t=e.createBufferSource();t.buffer=D;const a=e.createGain();a.gain.value=.001,t.connect(a),a.connect(e.destination),t.start()}catch{}P&&P.play().then(()=>{P.pause(),P.currentTime=0}).catch(()=>{})}document.addEventListener("touchend",X,{passive:!0});document.addEventListener("click",X);document.addEventListener("keydown",X);function st(){if(!E||!D){ot();return}if(k&&E.state==="running")try{const e=E.createBufferSource();e.buffer=D,e.connect(E.destination),e.start();return}catch{}if(P)try{P.currentTime=0,P.play().catch(()=>{})}catch{}E.state==="suspended"&&E.resume().then(()=>{k=!0})}wt();let nt=!1;document.addEventListener("click",()=>{if(!nt)try{const e=getAudioContext();e.state==="suspended"&&e.resume(),nt=!0}catch{}},{once:!1});function wt(){const e=document.createElement("canvas"),t=200;e.width=t,e.height=t;const a=e.getContext("2d"),r=a.createImageData(t,t);for(let o=0;o<r.data.length;o+=4){const i=190+Math.random()*40;r.data[o]=i,r.data[o+1]=i*.93,r.data[o+2]=i*.82,r.data[o+3]=14}a.putImageData(r,0,0);for(let o=0;o<12;o++)a.fillStyle=`rgba(150,120,70,${.03+Math.random()*.05})`,a.beginPath(),a.arc(Math.random()*t,Math.random()*t,1+Math.random()*3,0,6.283),a.fill();const n=e.toDataURL("image/png");document.querySelectorAll(".paper-grain").forEach(o=>{o.style.backgroundImage=`url(${n})`,o.style.backgroundSize=`${t}px ${t}px`})}document.querySelectorAll('#setup-form input[type="text"], #setup-form input[type="date"], #setup-form textarea').forEach(e=>{e.addEventListener("input",()=>st())});yt.forEach(e=>{const t=e.querySelector(".photo-input"),a=e.querySelector(".photo-preview"),r=parseInt(e.dataset.index);t.addEventListener("change",n=>{const o=n.target.files[0];if(!o)return;const i=new FileReader;i.onload=c=>{s.photos[r]=c.target.result,a.src=c.target.result,e.classList.add("has-photo")},i.readAsDataURL(o)})});gt.addEventListener("submit",e=>{e.preventDefault(),s.partnerName=document.getElementById("partner-name").value.trim(),s.senderName=document.getElementById("sender-name").value.trim();const t=document.getElementById("together-date").value;s.togetherDate=t?new Date(t+"T00:00:00"):new Date,s.letterContent=document.getElementById("letter-content").value.trim(),s.hasPhotos=s.photos.some(a=>a!==null),rt(),U(O)});function rt(){const e=new Date,t=e.getDate(),a=B[e.getMonth()],r=K(s.togetherDate),n=`${a.toUpperCase().slice(0,3)} ${t}, '${String(e.getFullYear()).slice(2)}`,o=document.getElementById("stamp-date");o&&(o.textContent=n);const i=s.partnerName?`Dear ${s.partnerName},`:"Dear you,",c=s.letterContent||"You are the most beautiful chapter in my story.";document.getElementById("letter-greeting").textContent=i,document.getElementById("letter-body").textContent=c,document.getElementById("letter-sender").textContent=s.senderName?`Yours, ${s.senderName}`:"";const d=String(e.getHours()).padStart(2,"0"),m=String(e.getMinutes()).padStart(2,"0"),u=`sealed at ${d}:${m}`;if(document.getElementById("letter-seal-date").textContent=u,document.getElementById("letter-seal-date").classList.add("visible"),document.getElementById("days-stamp").innerHTML=it(r),document.getElementById("days-stamp").classList.add("visible"),s.hasPhotos){G.style.display="";const x=`${a.toUpperCase().slice(0,3)} ${t}, ${e.getFullYear()}`;document.getElementById("strip-date").textContent=x;const b=s.partnerName&&s.senderName?`${s.senderName} & ${s.partnerName}`:s.partnerName?`me & ${s.partnerName}`:"you & me";document.getElementById("strip-caption").textContent=b,s.photos.forEach((l,L)=>{const p=document.getElementById(`strip-photo-${L}`);l?p.style.backgroundImage=`url(${l})`:p.style.background="linear-gradient(135deg, #E8E0D8 0%, #D4C8BC 100%)"})}else G.style.display="none";s.letterTyped=!1,setTimeout(()=>{at.classList.add("visible")},1200)}function it(e){return`<svg class="oval-stamp-svg" viewBox="0 0 160 120" fill="none" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="80" cy="60" rx="72" ry="52" stroke="currentColor" stroke-width="2.5"/>
    <ellipse cx="80" cy="60" rx="62" ry="43" stroke="currentColor" stroke-width="1"/>
    <path id="stamp-top-arc" d="M 28,55 A 62,43 0 0,1 132,55" fill="none"/>
    <text><textPath href="#stamp-top-arc" startOffset="50%" text-anchor="middle" font-family="'DM Sans',sans-serif" font-size="13" font-weight="500" letter-spacing="3" fill="currentColor">${e} DAYS</textPath></text>
    <path id="stamp-bot-arc" d="M 28,65 A 62,43 0 0,0 132,65" fill="none"/>
    <text><textPath href="#stamp-bot-arc" startOffset="50%" text-anchor="middle" font-family="'DM Sans',sans-serif" font-size="13" font-weight="500" letter-spacing="3" fill="currentColor">OF US</textPath></text>
    <line x1="25" y1="60" x2="55" y2="60" stroke="currentColor" stroke-width="1.2"/>
    <line x1="105" y1="60" x2="135" y2="60" stroke="currentColor" stroke-width="1.2"/>
    <text x="80" y="64" text-anchor="middle" font-family="'Playfair Display',Georgia,serif" font-size="16" font-weight="600" letter-spacing="2" fill="currentColor">LOVE</text>
  </svg>`}function K(e){const a=new Date-e;return Math.max(0,Math.floor(a/(1e3*60*60*24)))}xt.addEventListener("click",()=>{s.expandedPanel||Et()});G.addEventListener("click",()=>{s.expandedPanel||bt()});_.addEventListener("click",()=>{N()});z.addEventListener("click",e=>{e.target.closest(".save-btn")||N()});V.addEventListener("click",e=>{e.target.closest(".save-btn")||N()});document.addEventListener("keydown",e=>{e.key==="Escape"&&(s.expandedPanel?N():O.classList.contains("active")&&(s.typingActive=!1,U(q)))});function Et(){s.expandedPanel="letter";const e=new Date,t=e.getDate(),a=B[e.getMonth()],r=K(s.togetherDate),n=s.partnerName?`Dear ${s.partnerName},`:"Dear you,",o=s.letterContent||"You are the most beautiful chapter in my story.",i=document.getElementById("expand-stamp-date");i&&(i.textContent=`${a.toUpperCase().slice(0,3)} ${t}, '${String(e.getFullYear()).slice(2)}`);const c=document.getElementById("expand-letter-greeting"),d=document.getElementById("expand-letter-body"),m=document.getElementById("expand-letter-sender"),u=document.getElementById("expand-letter-seal-date"),x=s.senderName?`Yours, ${s.senderName}`:"",b=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0"),L=`sealed at ${b}:${l}`,p=document.getElementById("expand-days-stamp");p.innerHTML=it(r),p.classList.add("visible"),c.textContent="",d.textContent="",m.textContent="",u.textContent="",u.classList.remove("visible"),_.classList.add("active"),z.classList.add("active"),St(c,d,m,u,n,o,x,L)}function bt(){s.expandedPanel="photobooth";const e=new Date,t=e.getDate(),r=`${B[e.getMonth()].toUpperCase().slice(0,3)} ${t}, ${e.getFullYear()}`;document.getElementById("expand-strip-date").textContent=r;const n=s.partnerName&&s.senderName?`${s.senderName} & ${s.partnerName}`:s.partnerName?`me & ${s.partnerName}`:"you & me";document.getElementById("expand-strip-caption").textContent=n,s.photos.forEach((o,i)=>{const c=document.getElementById(`expand-strip-photo-${i}`);o?c.style.backgroundImage=`url(${o})`:c.style.background="linear-gradient(135deg, #E8E0D8 0%, #D4C8BC 100%)"}),_.classList.add("active"),V.classList.add("active")}function N(){s.typingActive=!1,s.expandedPanel=null,_.classList.remove("active"),z.classList.remove("active"),V.classList.remove("active")}async function St(e,t,a,r,n,o,i,c){s.typingActive=!0,await R(500),s.typingActive&&(e.classList.add("typing-cursor"),await Y(e,n,50),e.classList.remove("typing-cursor"),s.typingActive&&(await R(400),t.classList.add("typing-cursor"),await Y(t,o,40),t.classList.remove("typing-cursor"),s.typingActive&&(i&&(await R(300),a.classList.add("typing-cursor"),await Y(a,i,50),a.classList.remove("typing-cursor"),!s.typingActive)||(await R(300),r.textContent=c,r.classList.add("visible"),s.letterTyped=!0))))}function Y(e,t,a){return new Promise(r=>{let n=0,o=0;e.textContent="";function i(c){if(!s.typingActive||n>=t.length){e.textContent=t,r();return}if(c>=o){e.textContent+=t.charAt(n),st();const d=t.charAt(n);let m=a+Math.random()*20-10;d==="."||d==="!"||d==="?"?m+=180:d===","?m+=80:d===`
`&&(m+=120),o=c+m,n++}requestAnimationFrame(i)}requestAnimationFrame(i)})}function R(e){return new Promise(t=>setTimeout(t,e))}const It="#EAE2D3",Pt="#FFF8F0",M="#C0392B",ct="#8A7A76",j="#C0392B",Lt="#961C14";function At(e){return new Promise((t,a)=>{const r=new Image;r.onload=()=>t(r),r.onerror=a,r.src=e})}function Ct(e,t,a,r,n,o){const i=Math.max(n/t.width,o/t.height),c=t.width*i,d=t.height*i;e.save(),e.beginPath(),e.rect(a,r,n,o),e.clip(),e.drawImage(t,a+(n-c)/2,r+(o-d)/2,c,d),e.restore()}async function $(e,t){const a=await new Promise(c=>e.toBlob(c,"image/png")),r=document.getElementById("share-toast");if(navigator.share&&navigator.canShare)try{const d={files:[new File([a],t,{type:"image/png"})]};if(navigator.canShare(d)){await navigator.share(d);return}}catch{}const n=URL.createObjectURL(a),o=document.createElement("a");o.download=t,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),/iPad|iPhone|iPod/.test(navigator.userAgent)?(window.open(n,"_blank"),r.textContent="Long press image to save",r.classList.add("visible"),setTimeout(()=>r.classList.remove("visible"),3e3)):setTimeout(()=>URL.revokeObjectURL(n),5e3)}const w=850,C=1100,h=3;document.getElementById("btn-save").addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const t=J();if(await $(t,"love-letter.png"),s.hasPhotos){const a=await Q();await $(a,"photobooth.png")}});document.getElementById("expand-save-letter").addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const t=J();await $(t,"love-letter.png")});document.getElementById("expand-save-photobooth").addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const t=await Q();await $(t,"photobooth.png")});function J(){const e=document.createElement("canvas");e.width=w*h,e.height=C*h;const t=e.getContext("2d");t.scale(h,h),t.fillStyle=It,t.fillRect(0,0,w,C);const a=t.createRadialGradient(w/2,C/2,w*.3,w/2,C/2,w*.7);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(140,110,60,0.08)"),t.fillStyle=a,t.fillRect(0,0,w,C);for(let y=0;y<15;y++){const I=Math.random()*w,v=Math.random()*C,A=2+Math.random()*8;t.fillStyle=`rgba(160,130,70,${.02+Math.random()*.04})`,t.beginPath(),t.arc(I,v,A,0,Math.PI*2),t.fill()}const r=80;let n=r;const o=s.partnerName?`Dear ${s.partnerName},`:"Dear you,";t.font='28px "Special Elite", "Courier New", monospace',t.fillStyle=M,t.fillText(o,r,n),n+=50;const i=s.letterContent||"You are the most beautiful chapter in my story.";t.font='22px "Special Elite", "Courier New", monospace',t.fillStyle=M;const c=w-r*2,d=44,m=i.split(`
`);for(const y of m){const I=y.split(" ");let v="";for(const A of I){const et=v+(v?" ":"")+A;t.measureText(et).width>c&&v?(t.fillText(v,r,n),n+=d,v=A):v=et}v&&(t.fillText(v,r,n),n+=d),n+=8}s.senderName&&(n+=20,t.font='38px "Mrs Saint Delafield", cursive',t.fillStyle=M,t.textAlign="right",t.fillText(`Yours, ${s.senderName}`,w-r,n),t.textAlign="left",n+=48);const u=new Date,x=String(u.getHours()).padStart(2,"0"),b=String(u.getMinutes()).padStart(2,"0"),l=`SEALED AT ${x}:${b}`;t.font='14px "Special Elite", "Courier New", monospace',t.fillStyle=ct,t.textAlign="right",t.fillText(l,w-r,n),t.textAlign="left";const L=K(s.togetherDate),p=85,S=62,f=w-r-p-5,g=C-r-S-5;t.save(),t.globalAlpha=.7,t.strokeStyle=j,t.fillStyle=j,t.lineWidth=2.5,t.beginPath(),t.ellipse(f,g,p,S,0,0,Math.PI*2),t.stroke(),t.lineWidth=1,t.beginPath(),t.ellipse(f,g,p-10,S-9,0,0,Math.PI*2),t.stroke();const H=`${L} DAYS`;t.font='500 13px "DM Sans", sans-serif',t.textAlign="center",t.textBaseline="middle",t.save(),t.translate(f,g);const lt=S-20,Z=.09,dt=-Math.PI/2-(H.length-1)*Z/2;for(let y=0;y<H.length;y++){const I=dt+y*Z,v=(p-20)*Math.cos(I),A=lt*Math.sin(I);t.save(),t.translate(v,A),t.rotate(I+Math.PI/2),t.fillText(H[y],0,0),t.restore()}t.restore();const F="OF US";t.save(),t.translate(f,g);const ut=S-20,tt=.11,mt=Math.PI/2+(F.length-1)*tt/2;for(let y=0;y<F.length;y++){const I=mt-y*tt,v=(p-20)*Math.cos(I),A=ut*Math.sin(I);t.save(),t.translate(v,A),t.rotate(I-Math.PI/2),t.fillText(F[y],0,0),t.restore()}t.restore(),t.lineWidth=1.2,t.beginPath(),t.moveTo(f-p+18,g),t.lineTo(f-28,g),t.stroke(),t.beginPath(),t.moveTo(f+28,g),t.lineTo(f+p-18,g),t.stroke(),t.font='600 18px "Playfair Display", Georgia, serif',t.textAlign="center",t.textBaseline="middle",t.fillText("LOVE",f,g),t.globalAlpha=1,t.textAlign="left",t.textBaseline="top",t.restore();const pt=w-r-55,ht=r+15,T=55;t.save(),t.translate(pt,ht),t.rotate(.2),t.strokeStyle=M,t.lineWidth=2,t.beginPath(),t.arc(0,0,T,0,Math.PI*2),t.stroke(),t.lineWidth=1,t.beginPath(),t.arc(0,0,T-7,0,Math.PI*2),t.stroke(),t.lineWidth=1.5,t.beginPath(),t.moveTo(-T-6,0),t.lineTo(-T,0),t.stroke(),t.beginPath(),t.moveTo(T,0),t.lineTo(T+6,0),t.stroke(),t.fillStyle=M,t.font='400 8px "DM Sans", sans-serif',t.textAlign="center",t.textBaseline="middle",t.fillText("LOVE LETTER",0,-16);const W=new Date,ft=`${B[W.getMonth()].toUpperCase().slice(0,3)} ${W.getDate()}, '${String(W.getFullYear()).slice(2)}`;return t.font='500 12px "DM Sans", sans-serif',t.fillText(ft,0,2),t.font='300 7px "DM Sans", sans-serif',t.fillText("NEW YORK, NY",0,18),t.restore(),e}async function Q(){const n=Math.round(405),o=12,i=50,c=50,d=i+n*4+o*3+c,m=document.createElement("canvas");m.width=600,m.height=d;const u=m.getContext("2d");u.fillStyle=Pt,u.fillRect(0,0,600,d);const x=new Date,b=`${B[x.getMonth()].toUpperCase().slice(0,3)} ${x.getDate()}, ${x.getFullYear()}`;u.font='400 11px "DM Sans", "Helvetica Neue", sans-serif',u.fillStyle=ct,u.textAlign="center",u.textBaseline="middle",u.fillText(b,600/2,i/2);let l=i;for(let p=0;p<4;p++){if(s.photos[p])try{const S=await At(s.photos[p]),f=document.createElement("canvas");f.width=540,f.height=n;const g=f.getContext("2d");g.filter="grayscale(100%) contrast(1.1) brightness(1.05)",Ct(g,S,0,0,540,n),u.drawImage(f,30,l,540,n)}catch{u.fillStyle="#F5EDE0",u.fillRect(30,l,540,n)}else u.fillStyle="#F5EDE0",u.fillRect(30,l,540,n);l+=n+o}const L=s.partnerName&&s.senderName?`${s.senderName} & ${s.partnerName}`:s.partnerName?`me & ${s.partnerName}`:"you & me";return u.font='400 12px "DM Sans", "Helvetica Neue", sans-serif',u.fillStyle=M,u.textAlign="center",u.textBaseline="middle",u.fillText(L.toUpperCase(),600/2,l-o+c/2),m}document.getElementById("btn-share").addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const t=document.getElementById("share-toast"),a=window.location.origin+window.location.pathname;if(navigator.share)try{await navigator.share({title:"Love Letter",url:a});return}catch{}try{await navigator.clipboard.writeText(a),t.textContent="Link copied"}catch{t.textContent=a}t.classList.add("visible"),setTimeout(()=>t.classList.remove("visible"),2200)});document.getElementById("btn-send").addEventListener("click",async e=>{e.stopPropagation();const t=document.getElementById("share-toast"),a=J();let r=null;s.hasPhotos&&(r=await Q());const n=Tt(a,r),o=await new Promise(m=>n.toBlob(m,"image/png"));if(navigator.share&&navigator.canShare){const u={files:[new File([o],"lover-letter.png",{type:"image/png"})],title:"Love Letter"};if(navigator.canShare(u))try{await navigator.share(u);return}catch{}}const i=URL.createObjectURL(o),c=document.createElement("a");c.download="lover-letter.png",c.href=i,document.body.appendChild(c),c.click(),document.body.removeChild(c),/iPad|iPhone|iPod/.test(navigator.userAgent)?(window.open(i,"_blank"),t.textContent="Long press image to save & send",t.classList.add("visible"),setTimeout(()=>t.classList.remove("visible"),3e3)):(t.textContent="Image saved â€” send it to them!",t.classList.add("visible"),setTimeout(()=>t.classList.remove("visible"),2500),setTimeout(()=>URL.revokeObjectURL(i),5e3))});function Tt(e,t){const r=document.createElement("canvas");if(!t){const S=e.width/h+80,f=e.height/h+80;r.width=S*h,r.height=f*h;const g=r.getContext("2d");return g.scale(h,h),g.fillStyle=j,g.fillRect(0,0,S,f),g.drawImage(e,0,0,e.width,e.height,40,40,e.width/h,e.height/h),r}const n=e.width/h,o=e.height/h,i=t.width/h,c=t.height/h,d=Math.min(o*.7/c,n*.5/i),m=i*d,u=c*d,x=n+m+120,b=Math.max(o,u)+80;r.width=x*h,r.height=b*h;const l=r.getContext("2d");l.scale(h,h),l.fillStyle=Lt,l.fillRect(0,0,x,b),l.save(),l.translate(40+n/2,40+o/2),l.rotate(-.01),l.shadowColor="rgba(0,0,0,0.2)",l.shadowBlur=15,l.shadowOffsetX=4,l.shadowOffsetY=4,l.drawImage(e,0,0,e.width,e.height,-n/2,-o/2,n,o),l.restore(),l.save();const L=80+n+m/2,p=b/2;return l.translate(L,p),l.rotate(.03),l.shadowColor="rgba(0,0,0,0.3)",l.shadowBlur=20,l.shadowOffsetX=5,l.shadowOffsetY=5,l.drawImage(t,0,0,t.width,t.height,-m/2,-u/2,m,u),l.restore(),r}function U(e){q.classList.remove("active"),O.classList.remove("active"),e.classList.add("active")}vt.addEventListener("click",()=>{if(s.expandedPanel){N();return}s.typingActive=!1,at.classList.remove("visible"),U(q)});function Mt(e){try{const t=decodeURIComponent(escape(atob(e)));return JSON.parse(t)}catch{return null}}(function(){const t=window.location.hash.slice(1);if(!t)return;const a=Mt(t);a&&(a.n&&(document.getElementById("partner-name").value=a.n,s.partnerName=a.n),a.s&&(document.getElementById("sender-name").value=a.s,s.senderName=a.s),a.d&&(document.getElementById("together-date").value=a.d,s.togetherDate=new Date(a.d+"T00:00:00")),a.l&&(document.getElementById("letter-content").value=a.l,s.letterContent=a.l),s.hasPhotos=!1,rt(),U(O))})();
